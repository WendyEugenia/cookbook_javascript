<h1>Projeto 01 - Conta Banc√°ria - ContaController - Parte II</h1>



Na etapa anterior, criamos a Classe **ContaController**, que implementa a Interface **ContaRepository**, que possui a assinatura dos M√©todos necess√°rios para manipular os Objetos das Classes **ContaCorrente** e **ContaPoupanca**, e armazen√°-los (em mem√≥ria) no Array do tipo List (listaContas). Implementamos os M√©todos Listar Todas as Contas e Cadastrar Conta da Interface **ContaRepository**, e o M√©todo auxiliar **Gerar Numero da Conta**.

Nesta etapa, vamos continuar a implementa√ß√£o dos M√©todos da  Interface **ContaRepository** e de alguns M√©todos auxiliares.

O Diagrama de Classes do nosso Projeto ficar√° da seguinte forma:

```mermaid
classDiagram
class Conta {
<<Abstract>>
  - numero : number
  - agencia : number
  - tipo : number
  - titular : string
  - saldo : number
  + get numero(): number
  + get agencia(): number
  + get tipo(): number
  + get titular(): string
  + get saldo(): number
  + set numero(numero: number): void
  + set agencia(agencia: number): void
  + set tipo(tipo: number): void
  + set titular(titular: string): void
  + set saldo(saldo: number): void
  + sacar(valor: number): boolean
  + depositar(valor: number): void
  + visualizar(): void
}
class ContaCorrente {
  - limite : number
  + get limite(): number
  + set limite(limite: number): void
  + sacar(number valor): boolean
  + visualizar(): void
}
class ContaPoupanca {
  - aniversario : number
  + get aniversario(): number
  + set aniversario(aniversario: number): void
  + visualizar(): void
}
class ContaRepository{
<< Interface >>
+ procurarPorNumero(numero: number): void
+ listarTodas(): void
+ cadastrar(conta: Conta): void
+ atualizar(conta: Conta): void
+ deletar(numero: number): void
+ sacar(numero: number, valor: number): void
+ depositar(numero: number, valor: number): void
+ transferir(numeroOrigem: number, numeroDestino: number, valor: number): void
}
class ContaController{
+ procurarPorNumero(numero: number): void
+ listarTodas(): void
+ cadastrar(conta: Conta): void
+ atualizar(conta: Conta): void
+ deletar(numero: number): void
+ sacar(numero: number, valor: number): void
+ depositar(numero: number, valor: number): void
+ transferir(numeroOrigem: number, numeroDestino: number, valor: number): void
+ gerarNumero(): number
+ buscarNaCollection(number numero): Conta
+ RetornaTipo(number numero): number
}
Conta <|-- ContaCorrente
Conta <|-- ContaPoupanca
Conta <.. ContaRepository
ContaRepository <|.. ContaController
```

<br />

<h2>üë£ Passo 01 - Implementar o M√©todo Procurar Conta por Numero</h2>



Na sequ√™ncia, vamos implementar o M√©todo Procurar Conta por Numero, mas antes, precisamos criar o M√©todo auxiliar Buscar no Array, no final da Classe ContaController, que retornar√° um Objeto conta a partir do numero da conta, caso este Objeto exista, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/AAvTuZB.png" title="source: imgur.com" /></div>

**Linha 60:** Observe que na assinatura do M√©todo foi inserido como par√¢metro uma vari√°vel do tipo **number**, chamada **numero**, que receber√° o n√∫mero da conta que se deseja localizar. Observe que no tipo de retorno do M√©todo (Conta), foram adicionadas duas op√ß√µes de retorno, **Conta | null**, indicando que o retorno do M√©todo pode ser um Objeto Nulo, caso a conta n√£o seja encontrada, ou um Objeto da Classe Conta, caso a conta seja encontrada.

**Linha 62:** Atrav√©s do La√ßo de Repeti√ß√£o **for...of**, percorremos todo o **Array listaContas**. 

Observe que a vari√°vel local **conta**, utilizada para receber um Objeto Conta a cada itera√ß√£o do Array, definida pelo La√ßo de repeti√ß√£o, foi criada atrav√©s da palavra reservada **let**.


Assim como no c√≥digo do M√©todo **listarTodas()**, o La√ßo de Repeti√ß√£o percorre todo o Array **listaContas**, que armazena Objetos da Classe Conta. A palavra reservada **let** entende que a vari√°vel **conta** deve ser criada como um Objeto da Classe Conta, porque receber√° um Objeto da Classe Conta.

**Linha 63:** Verifica se o Atributo **numero**, do Objeto da Classe Conta armazenado na vari√°vel **conta** √© o mesmo n√∫mero que foi enviado na vari√°vel numero.

**Linha 64:** Se os n√∫meros forem iguais, o M√©todo devolve o Objeto Conta encontrado e finaliza o La√ßo de repeti√ß√£o.

**Linha 67:** Se o n√∫mero n√£o for encontrado no Array listaContas, o M√©todo devolve um Objeto Nulo.

M√©todo auxiliar criado, vamos implementar o c√≥digo do M√©todo Procurar Conta por Numero, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/vmV5cLD.png" title="source: imgur.com" /></div>

**Linha 10:** Observe que na assinatura do M√©todo foi inserido como par√¢metro uma vari√°vel do tipo **number**, chamada **numero**, que receber√° o n√∫mero da conta que se deseja localizar. 

**Linha 11:** Foi criada a vari√°vel local **conta**, utilizada para receber o Objeto Conta, que foi encontrado no Array **listaContas**, atrav√©s da palavra reservada **let**. Por infer√™ncia, a palavra reservada **let** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNoArray**.

**Linhas 13 a 17:** Atrav√©s de um La√ßo Condicional if, verifica se o Objeto Conta foi encontrado. 

- Se foi encontrado, exibe os dados na tela atrav√©s do M√©todo **visualizar()**. 
- Caso contr√°rio (Objeto null), exibe na tela a mensagem informando que a conta n√£o foi encontrada.

Para buscar um Objeto da Classe Conta, precisamos receber o numero da Conta, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber o numero da conta atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 02 - Inserir o M√©todo Procurar Conta por N√∫mero na Classe Menu</h2>



Agora que implementamos o M√©todo Procurar Conta por N√∫mero, vamos inserir uma chamada para este M√©todo na Classe Menu:

1. Vamos utilizar a vari√°vel **numero**, criada anteriormente, para receber o numero da conta que se deseja pesquisar

<div align="center"><img src="https://i.imgur.com/d4x1cQd.png" title="source: imgur.com" /></div>

2. Localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/U5n53jV.png" title="source: imgur.com" /></div>

3. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/zpb5AIK.png" title="source: imgur.com" /></div>

**Linhas 110 a 111:** Foi criada a entrada de dados via teclado para a vari√°vel **numero**, que receber√° o numero da conta que dever√° ser procurada no Array **listaContas**.

**Linha 112:** Executa o M√©todo **procurarPorNumero(numero)**, da Classe **ContaController**, passando como par√¢metro a vari√°vel **numero**, que cont√©m o numero da conta (recebido via teclado), que dever√° ser procurada no Array **listaContas**. 

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 1000.00
Limite de Cr√©dito: 100.00

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **1**, a conta foi encontrada e os seus dados foram exibidos na tela. 

3. Experimente repetir a opera√ß√£o e digitar o numero 10:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
10

A Conta numero: 10 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **10**, a conta n√£o foi encontrada e uma mensagem foi exibida na tela. 

<br />

<h2>üë£ Passo 03 - Implementar o M√©todo Atualizar Conta</h2>



Na sequ√™ncia, vamos implementar o M√©todo Atualizar Conta, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/Of8YAee.png" title="source: imgur.com" /></div>

**Linha 32:** Observe que na assinatura do M√©todo, foi inserido como par√¢metro um Objeto da Classe Conta, chamado **conta**. Este Objeto ter√° os seus dados atualizados no Array **listaContas**.

**Linha 33:** Antes de atualizar o Objeto Conta no Array **listaContas**, precisamos verificar se o Objeto conta existe. Observe que foi criada a vari√°vel local **buscaConta**, para receber o Objeto da Classe Conta, que foi encontrado no Array **listaContas**. 

O Objeto **buscaConta** foi criado atrav√©s da palavra reservada **let**. Por infer√™ncia, a palavra reservada **let** entende que a vari√°vel buscaConta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNoArray**.

**Linhas 35 a 41:** Atrav√©s do La√ßo Condicional if, verifica se o Objeto Conta foi encontrado. 

- Se a conta foi encontrada, os dados do Objeto s√£o atualizados no Array **listaContas**:
  - **Linha 36:** Atrav√©s do M√©todo **indexOf(buscaConta)**, vamos **procurar o √≠ndice (posi√ß√£o) do Objeto conta** encontrado no Array listaContas, ou seja, os dados atuais. Na sequencia, vamos atribuir o Objeto conta, que foi recebido no par√¢metro do M√©todo **atualizar(conta)**, substituindo os dados atuais pelos novos dados recebidos via teclado. 
- Caso contr√°rio (Objeto null), exibe na tela a mensagem informando que a conta n√£o foi encontrada.

Para atualizar os dados de um Objeto da Classe Conta, precisamos receber os novos dados da Conta, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para inserir os novos dados da Conta atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 04 - Inserir o M√©todo Atualizar Conta na Classe Menu</h2>



Agora que implementamos o M√©todo Atualizar Conta, vamos inserir uma chamada para este M√©todo na Classe Menu:

Para atualizar os dados de uma conta, precisamos criar as entradas de dados, ou seja, criar um formul√°rio de cadastro, semelhante ao do M√©todo Cadastrar. 

Vamos criar o formul√°rio de atualiza√ß√£o e criar a chamada para o M√©todo Atualizar na Classe Menu

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/BZatKnS.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/TkgfS6l.png" title="source: imgur.com" /></div>

**Linhas 119 a 120:** Foi criada a entrada de dados via teclado para a vari√°vel **numero**, que receber√° o numero da conta que dever√° ser atualizada no Array **listaContas**.

**Linha 122:** Antes de atualizar, precisamos checar se a conta existe. Vamos procurar a conta atrav√©s do M√©todo **procurarPorNumero(numero)**, da Classe **ContaController**, passando como par√¢metro a vari√°vel **numero**, que cont√©m o numero da conta (recebido via teclado). O resultado desta busca ser√° guardada na vari√°vel **conta**.

**Linha 124:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado.

Se o Objeto da Classe Conta foi encontrado, o processo de atualiza√ß√£o da conta ser√° iniciado.

**Linhas 126 a 130:** Foram criadas as entradas de dados via teclado para as vari√°veis **agencia** e **titular**.

**Linha 132:** A vari√°vel **tipo** recebe o tipo da Conta, obtido atrav√©s do atributo tipo do Objeto conta, que foi encontrado. Este atributo nunca ter√° o seu valor modificado.

**Linhas 134 a 135:** Foi criada a entrada de dados via teclado para a vari√°vel **saldo**.

**Linhas 137 a 150:** Foi criado um La√ßo condicional do tipo **Switch**, que checar√° qual o tipo da conta. 

- Caso a conta seja do tipo **Conta Corrente (tipo 1)**, solicita a entrada de dados via teclado para a vari√°vel **limite** e executa o M√©todo **atualizar** da Classe **ContaController**.
- Caso a conta seja do tipo **Conta Poupan√ßa (tipo 2)**, solicita a entrada de dados via teclado para a vari√°vel **aniversario** e executa o M√©todo **atualizar** da Classe **ContaController**.

**Linha 142:** Observe que dentro do M√©todo **atualizar** foi criado um Objeto da Classe **ContaCorrente**, composto pelos valores das vari√°veis auxiliares, que receberam os dados via teclado, inclusive o atributo **numero**, que foi preenchido com o valor informado na vari√°vel **numero**. Como se trata de uma atualiza√ß√£o, o numero da conta n√£o deve ser modificado.

**Linha 147:** Observe que dentro do M√©todo **atualizar** foi criado um Objeto da Classe **ContaPoupanca**, composto pelos valores das vari√°veis auxiliares, que receberam os dados via teclado, inclusive o atributo **numero**, que foi preenchido com o valor informado na vari√°vel **numero**. Como se trata de uma atualiza√ß√£o, o numero da conta n√£o deve ser modificado.

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/E65jsrI.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **4** e fa√ßa a Atualiza√ß√£o dos dados da Conta Corrente numero **1**, como mostra o console abaixo:

```bash
Atualizar dados da Conta

Digite o n√∫mero da conta: 
1
Digite o Numero da Ag√™ncia: 
789
Digite o Nome do Titular: 
Jo√£o da Silva Santos
Digite o Saldo da Conta (R$): 
5000
Digite o Limite de Cr√©dito (R$): 
600

A Conta numero: 1 foi atualizada com sucesso!

Pressione Enter para Continuar...
```

3. Observe que a Conta foi Atualizada com sucesso. Pressione a tecla enter e atualize a Conta Poupan√ßa numero 3:

```bash
Atualizar dados da Conta

Digite o n√∫mero da conta: 
3
Digite o Numero da Ag√™ncia: 
321
Digite o Nome do Titular: 
Mariana dos Santos Noronha
Digite o Saldo da Conta (R$): 
4500
Digite o dia do Aniversario da Conta: 
15

A Conta numero: 3 foi atualizada com sucesso!

Pressione Enter para Continuar...
```

4. Digite a op√ß√£o 2 (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/Azkf3TC.png" title="source: imgur.com" /></div>

5. Veja o resultado abaixo:

```bash
Listar todas as Contas

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 789
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva Santos
Saldo: 5000.0
Limite de Cr√©dito: 600.0

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 2
Ag√™ncia: 124
Tipo da Conta: Conta Corrente
Titular: Maria da Silva
Saldo: 2000.0
Limite de Cr√©dito: 100.0

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 3
Ag√™ncia: 321
Tipo da Conta: Conta Poupan√ßa
Titular: Mariana dos Santos Noronha
Saldo: 4500.0
Anivers√°rio da conta: 15

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 4
Ag√™ncia: 125
Tipo da Conta: Conta Poupan√ßa
Titular: Juliana Ramos
Saldo: 8000.0
Anivers√°rio da conta: 15

Pressione Enter para Continuar...
```

Observe que os dados das contas 1 e 3 foram atualizados no Array **listaContas**.

<br />

<h2>üë£ Passo 05 - Implementar o M√©todo Deletar Conta</h2>

Para finalizar os M√©todos do CRUD, vamos implementar o M√©todo Deletar Conta, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/WefGMzu.png" title="source: imgur.com" /></div>

**Linha 44:** Observe que na assinatura do M√©todo foi inserido como par√¢metro uma vari√°vel do tipo **number**, chamada **numero**, que receber√° o n√∫mero da conta que se deseja deletar. 

**Linha 45:** Antes de deletar o Objeto Conta no Array **listaContas**, precisamos verificar se o Objeto conta existe. 

Observe que foi criada a vari√°vel local **conta**, para receber o Objeto da Classe Conta, que foi encontrado no Array **listaContas**. Esse Objeto foi criado atrav√©s da palavra reservada **let**. Por infer√™ncia, a palavra reservada **let** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNoArray**.

**Linhas 47 a 53:** Atrav√©s do La√ßo Condicional if, verifica se o Objeto Conta foi encontrado. 

- Se a conta foi encontrada, o Objeto conta ser√° apagado no Array **listaContas** atrav√©s do M√©todo **splice(indice, numero_de_itens)**. Observe que dentro do M√©todo **splice()**, foram adicionados dois par√¢metros: o √≠ndice do Objeto conta,obtido atrav√©s do M√©todo **indexOf()** e o n√∫mero de elementos que ser√£o exclu√≠dos a partir do √≠ndice do Objeto conta, no caso ser√° apenas um elemento (o pr√≥prio objeto conta). 
  
- Caso contr√°rio (Objeto nulo), exibe na tela a mensagem informando que a conta n√£o foi encontrada.

Para buscar um Objeto da Classe Conta e Excluir caso seja encontrado, precisamos receber o numero da Conta, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber o numero da conta atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 06 - Inserir o M√©todo Deletar Conta na Classe Menu</h2>



Agora que implementamos o M√©todo M√©todo Deletar Conta, vamos inserir uma chamada para este M√©todo na Classe Menu:

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/uwPlsHn.png" title="source: imgur.com" /></div>

3. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/p07eqET.png" title="source: imgur.com" /></div>

**Linhas 162 a 163:** Foi criada a entrada de dados via teclado para a vari√°vel **numero**, que receber√° o numero da conta que ser√° exclu√≠da do Array **listaContas**.

**Linha 164:** Executa o M√©todo **deletar(numero)**, da Classe **ContaController**, passando como par√¢metro a vari√°vel **numero**, que cont√©m o numero da conta (recebido via teclado), que ser√° exclu√≠da do Array **listaContas**. 

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/QC5Lxwa.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **5** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Apagar a Conta

Digite o n√∫mero da conta: 
1

A Conta numero: 1 foi deletada com sucesso!

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **1** a conta foi encontrada e deletada. Al√©m disso, uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o e digitar o numero 10:

```bash
Apagar a Conta

Digite o n√∫mero da conta: 
10

A Conta numero: 10 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que ao procurarmos a conta numero **10**, a conta n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se a conta numero 1 foi exclu√≠da:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

A Conta n√∫mero: 1 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que a conta numero **1** n√£o foi encontrada, confirmando que a conta foi apagada. 

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="4%"/> <a href="https://github.com/rafaelq80/conta_bancaria_typescript/tree/08_Conta_Controller_CRUD" target="_blank"><b>C√≥digo fonte: Projeto Conta Banc√°ria</b></a></div>

<br /><br />


<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>