<h1>Projeto 01 - Conta Banc√°ria - ContaController - Parte III</h1>



Na etapa anterior, implementamos os 5 M√©todos do CRUD na Classe **ContaController**. Nesta etapa do Projeto vamos finalizar a Classe ContaController implementando os 3 M√©todos Banc√°rios (Sacar, Depositar e Transferir).

O Diagrama de Classes do nosso Projeto ficar√° da seguinte forma:

```mermaid
classDiagram
class Conta {
<<Abstract>>
  - numero : number
  - agencia : number
  - tipo : number
  - titular : string
  - saldo : number
  + get numero() number
  + get agencia() number
  + get tipo() number
  + get titular() string
  + get saldo() number
  + set numero(numero: number) void
  + set agencia(agencia: number) void
  + set tipo(tipo: number) void
  + set titular(titular: string) void
  + set saldo(saldo: number) void
  + sacar(valor: number) boolean
  + depositar(valor: number) void
  + visualizar() void
}
class ContaCorrente {
  - limite : number
  + get limite() number
  + set limite(limite: number) void
  + sacar(number valor) boolean
  + visualizar() void
}
class ContaPoupanca {
  - aniversario : number
  + get aniversario() number
  + set aniversario(aniversario: number) void
  + visualizar() void
}
class IContaRepository{
<< Interface >>
+ procurarPorNumero(numero: number) void
+ listarTodas() void
+ cadastrar(conta: Conta) void
+ atualizar(conta: Conta) void
+ deletar(numero: number) void
+ sacar(numero: number, valor: number) void
+ depositar(numero: number, valor: number) void
+ transferir(numeroOrigem: number, numeroDestino: number, valor: number) void
}
class ContaController{
+ procurarPorNumero(numero: number) void
+ listarTodas() void
+ cadastrar(conta: Conta) void
+ atualizar(conta: Conta) void
+ deletar(numero: number) void
+ sacar(numero: number, valor: number) void
+ depositar(numero: number, valor: number) void
+ transferir(numeroOrigem: number, numeroDestino: number, valor: number) void
+ gerarNumero() number
+ buscarNaCollection(number numero) Conta
}
Conta <|-- ContaCorrente
Conta <|-- ContaPoupanca
Conta <.. IContaRepository
IContaRepository <|.. ContaController
```

<br />

<h2>üë£ Passo 01 - Implementar o M√©todo Sacar</h2>



Na sequ√™ncia, vamos implementar o M√©todo Sacar, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/GKlQenn.png" title="source: imgur.com" /></div>

**Linha 56:** Observe que na assinatura do M√©todo, foram inseridos 2 par√¢metros:

- **numero:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **valor:** O valor que ser√° debitado da conta. 

**Linha 59:** Antes de Efetuar o saque na conta, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **conta**, para receber o Objeto da Classe Conta, que foi encontrado no Array **listaContas**. 

O Objeto **conta** foi criado atrav√©s da palavra reservada **let**. Por infer√™ncia, a palavra reservada **let** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNoArray**.

**Linhas 59 a 67:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado (linha 59). 

- Se a conta foi encontrada, um novo la√ßo condicional ser√° executado para checar se o saque foi bem sucedido (linha 61). A opera√ß√£o saque ser√° efetuada atrav√©s do M√©todo **sacar(valor)**, do tipo boolean (verdadeiro ou falso). 
- Caso o saque tenha sido bem sucedido (true), ser√° exibida uma mensagem confirmando o saque (linha 62). 
- Caso o Saque **n√£o seja bem sucedido** (Saldo insuficiente), o pr√≥prio M√©todo **sacar(valor)** exibir√° uma mensagem indicando que o Saldo da conta √© insuficiente.
- Caso a conta n√£o seja encontrada (linha 66), ser√° exibida na tela a mensagem informando que a conta n√£o foi encontrada.

Para efetuar o saque, precisamos receber o numero da Conta de origem e o valor do saque, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber os dados atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 02 - Inserir o M√©todo Sacar na Classe Menu</h2>



Agora que implementamos o M√©todo Sacar, vamos inserir uma chamada para este M√©todo na Classe Menu:

Para efetuar as opera√ß√µes banc√°rias, vamos criar algumas vari√°veis, que ir√£o armazenar temporariamente os dados da transa√ß√£o.

1. Crie as vari√°veis **numeroDestino e valor**, na Classe Menu, como mostra o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/IMJPM9i.png" title="source: imgur.com" /></div>

2. Na tabela abaixo, temos detalhes das 2 vari√°veis criadas:

| Nome          | Tipo   | Descri√ß√£o                                   |
| ------------- | ------ | ------------------------------------------- |
| numeroDestino | number | Numero da conta de destino da Transfer√™ncia |
| valor         | number | Valor do saque, dep√≥sito ou transfer√™ncia   |

<br />

Na sequ√™ncia, vamos criar o formul√°rio da opera√ß√£o saque e criar a chamada para o M√©todo Sacar na Classe Menu

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/EsfTWkB.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/ZXHqIxA.png" title="source: imgur.com" /></div>

**Linhas 171 a 175:** Foram criadas as entradas de dados via teclado, para as vari√°veis **numero** e **valor**.

**Linha 177:** Foi criada a chamada para o M√©todo **Sacar(numero, valor)**, criado na Classe **ContaController**. Na chamada do M√©todo foram inseridos 2 par√¢metros:

- **numero:** Numero da Conta onde o saque ser√° efetuado;
- **valor:** Valor que ser√° debitado da conta.

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/QC5Lxwa.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **6** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Digite o Numero da conta: 
1
Digite o Valor do Saque (R$): 
100

O Saque na Conta numero: 1 foi efetuado com sucesso!


Pressione Enter para Continuar...
```

No exemplo acima fizemos um saque de **R$ 100,00** na conta numero **1** e uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o na conta numero 10:

```bash
Digite o Numero da conta: 
10
Digite o Valor do Saque (R$): 
100

A Conta numero: 10 n√£o foi encontrada!

Pressione Enter para Continuar...
```

Observe que a conta numero **10** n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se o saque na conta numero 1 foi efetuado com sucesso:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 900.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **1** foi alterado de **R$ 1000,00** para **R$ 900,00**, confirmando que o saque foi efetuado com sucesso. 

<br />

| <img src="https://i.imgur.com/L338M2G.png" title="source: imgur.com" width="138px"/> | **DESAFIO:** Experimente fazer um saque com um valor maior do que o Saldo da conta e um outro saque passando um valor negativo. No caso de uma Conta Corrente, lembre-se que o saldo √© composto por: saldo + limite. A melhor forma de aprender uma Linguagem de Programa√ß√£o √© praticando! |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<h2>üë£ Passo 03 - Implementar o M√©todo Depositar</h2>



Na sequ√™ncia, vamos implementar o M√©todo Depositar, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/sXZugCO.png" title="source: imgur.com" /></div>

**Linha 70:** Observe que na assinatura do M√©todo, foram inseridos 2 par√¢metros:

- **numero:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **valor:** O valor que ser√° debitado da conta. 

**Linha 72:** Antes de Efetuar o dep√≥sito na conta, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **conta**, para receber o Objeto da Classe Conta, que foi encontrado no Array **listaContas**. Esse Objeto foi criado atrav√©s da palavra reservada **let**. Por infer√™ncia, a palavra reservada **let** entende que a vari√°vel conta, deve ser um Objeto da Classe Conta, porque receber√° o retorno do M√©todo **buscarNoArray**.

- **Linhas 74 a 81:** Atrav√©s do La√ßo Condicional, verifica se o Objeto Conta foi encontrado (linha 74). 
  - Se a conta foi encontrada, a opera√ß√£o dep√≥sito ser√° efetuada atrav√©s do M√©todo **depositar(valor)** (linha 75). 
  - Na sequ√™ncia ser√° exibida uma mensagem confirmando o dep√≥sito (linha 76). 
  - Caso a conta n√£o seja encontrada (linha 80), ser√° exibida na tela a mensagem informando que a conta n√£o foi encontrada.

Para efetuar o dep√≥sito, precisamos receber o numero da Conta de destino e o valor do dep√≥sito, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber os dados atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 04 - Inserir o M√©todo Depositar na Classe Menu</h2>



Agora que implementamos o M√©todo Depositar, vamos criar o formul√°rio da opera√ß√£o dep√≥sito e criar a chamada para o M√©todo Depositar na Classe Menu:

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/qEpKnvP.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/XxN5iTq.png" title="source: imgur.com" /></div>

**Linhas 183 a 188:** Foram criadas as entradas de dados via teclado, para as vari√°veis **numero** e **valor**.

**Linha 189:** Foi criada a chamada para o M√©todo **depositar(numero, valor)**, criado na Classe **ContaController**. Na chamada do M√©todo foram inseridos 2 par√¢metros:

- **numero:** Numero da Conta onde o dep√≥sito ser√° efetuado;
- **valor:** Valor que ser√° creditado na conta.

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/6OYK0D5.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **7** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Dep√≥sito

Digite o Numero da conta: 
1
Digite o Valor do Dep√≥sito (R$): 
100

O Dep√≥sito na Conta numero: 1 foi efetuado com sucesso!

Pressione Enter para Continuar...
```

No exemplo acima fizemos um dep√≥sito de **R$ 100,00** na conta numero **1** e uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o na conta numero 10:

```bash
Dep√≥sito

Digite o Numero da conta: 
10
Digite o Valor do Dep√≥sito (R$): 
100

A Conta numero: 10 n√£o foi encontrada ou a Conta destino n√£o √© uma Conta Corrente!

Pressione Enter para Continuar...
```

Observe que a conta numero **10** n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se o dep√≥sito na conta numero 1 foi efetuado com sucesso:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 1100.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **1** foi alterado de **R$ 1000,00** para **R$ 1100,00**, confirmando que o dep√≥sito foi efetuado com sucesso. 

<br />

| <img src="https://i.imgur.com/L338M2G.png" title="source: imgur.com" width="138px"/> | **DESAFIO:** Experimente fazer um dep√≥sito passando um valor negativo. A melhor forma de aprender uma Linguagem de Programa√ß√£o √© praticando! |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<h2>üë£ Passo 05 - Implementar o M√©todo Transferir</h2>



Na sequ√™ncia, vamos implementar o M√©todo Transferir, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/a4dQloD.png" title="source: imgur.com" /></div>

**Linha 84:** Observe que na assinatura do M√©todo, foram inseridos 3 par√¢metros:

- **numeroOrigem:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **numeroDestino:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Dep√≥sito, ou seja, receber√° a Transfer√™ncia.
- **valor:** O valor que ser√° debitado da conta de origem e ser√° creditado na conta de destino. 

**Linha 85:** Antes de Efetuar o saque na conta de origem, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **contaOrigem**, para receber o Objeto da Classe Conta, que foi encontrado no Array **listaContas**. 

**Linha 86:** Antes de Efetuar o dep√≥sito na conta de destino, precisamos verificar se a conta existe. Observe que foi criada a vari√°vel local **contaDestino**, para receber o Objeto da Classe Conta, que foi encontrado no Array **listaContas**. 

- **Linhas 88 a 99:** Atrav√©s do La√ßo Condicional if, verifica se os dois Objetos Conta (conta origem e conta destino) foram encontrados (linha 88). 
  - Se as 2 contas foram encontradas, um novo la√ßo condicional ser√° executado para checar se o saque na conta origem foi bem sucedido (linha 89). A opera√ß√£o saque ser√° efetuada atrav√©s do M√©todo **sacar(valor)**, do tipo boolean (verdadeiro ou falso). 
  - Caso o saque tenha sido bem sucedido, o M√©todo **sacar(valor)** retornar√° o valor **true** (verdadeiro) . 
  - Caso o Saque **n√£o seja bem sucedido** (Saldo insuficiente), o pr√≥prio M√©todo **sacar(valor)** exibir√° uma mensagem indicando que o Saldo da conta √© insuficiente.
  - Na sequ√™ncia, a opera√ß√£o dep√≥sito ser√° efetuada na conta destino, atrav√©s do M√©todo **depositar(valor)** (linha 90). 
  - Se as 2 opera√ß√µes forem bem sucedidas, ser√° exibida uma mensagem confirmando a transfer√™ncia (linha 91).
  - Caso uma ou as duas contas n√£o sejam encontradas (linha 97), ser√° exibida na tela a mensagem informando que as contas n√£o foram encontradas.

Para efetuar a transfer√™ncia, precisamos receber os n√∫meros das Contas de origem e destino, al√©m do valor da transfer√™ncia, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para receber os dados atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 06 - Inserir o M√©todo Transferir na Classe Menu</h2>



Agora que implementamos o M√©todo Transferir, vamos criar o formul√°rio da opera√ß√£o transfer√™ncia e criar a chamada para o M√©todo Transferir na Classe Menu:

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/ScXbH7y.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/VBEtfG5.png" title="source: imgur.com" /></div>

**Linhas 197 a 204:** Foram criadas as entradas de dados via teclado, para as vari√°veis **numero**, **numeroDestino** e **valor**.

**Linha 206:** Foi criada a chamada para o M√©todo **transferir(numeroOrigem, numeroDestino, valor)**, criado na Classe **ContaController**. Na chamada do M√©todo foram inseridos 3 par√¢metros:

- **numero:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Saque.
- **numeroDestino:** N√∫mero da conta que ser√° efetuada a opera√ß√£o de Dep√≥sito, ou seja, receber√° a Transfer√™ncia.
- **valor:** O valor que ser√° debitado da conta de origem e ser√° creditado na conta de destino. 

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/yGuIMkb.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **8** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Transfer√™ncia entre Contas

Digite o Numero da Conta de Origem: 
1
Digite o Numero da Conta de Destino: 
2
Digite o Valor da Transfer√™ncia (R$): 
100

A Transfer√™ncia foi efetuado com sucesso!

Pressione Enter para Continuar...
```

No exemplo acima fizemos uma transfer√™ncia de **R$ 100,00** da conta numero **1** para a conta numero 2 e uma mensagem de confirma√ß√£o foi exibida na tela. 

3. Experimente repetir a opera√ß√£o na conta de origem numero 10:

```bash
Transfer√™ncia entre Contas

Digite o Numero da Conta de Origem: 
10
Digite o Numero da Conta de Destino: 
2
Digite o Valor da Transfer√™ncia (R$): 
100

A Conta de Origem e/ou Destino n√£o foram encontradas!

Pressione Enter para Continuar...
```

Observe que a conta numero **10** n√£o foi encontrada e uma mensagem foi exibida na tela. 

Na sequ√™ncia, vamos confirmar se a transfer√™ncia da conta numero 1 para a conta numero 2 foi efetuada com sucesso:

1. Digite a op√ß√£o **3** (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/knikiOc.png" title="source: imgur.com" /></div>

2.  No item numero da conta, digite o numero **1** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
1

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Jo√£o da Silva
Saldo: 900.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **1** foi alterado de **R$ 1000,00** para **R$ 900,00**, confirmando que o saque foi efetuado com sucesso. 

3. Na sequ√™ncia, vamos checar a conta numero **2** e veja o resultado abaixo:

```bash
Consultar dados da Conta - por n√∫mero

Digite o n√∫mero da conta: 
2

*********************************************************************
Dados da Conta:
*********************************************************************
Numero da Conta: 2
Ag√™ncia: 124
Tipo da Conta: Conta Corrente
Titular: Maria da Silva
Saldo: 2100.0
Limite de Cr√©dito: 100.0

Pressione Enter para Continuar...
```

Observe que o saldo da conta numero **2** foi alterado de **R$ 1000,00** para **R$ 1000,00**, confirmando que a transfer√™ncia  foi efetuada com sucesso.

<br />

| <img src="https://i.imgur.com/L338M2G.png" title="source: imgur.com" width="138px"/> | **DESAFIO:** Experimente fazer uma transfer√™ncia com um valor maior do que o Saldo da conta de origem e uma outra transfer√™ncia passando um valor negativo. No caso de uma Conta Corrente, lembre-se que o saldo √© composto por: saldo + limite. A melhor forma de aprender uma Linguagem de Programa√ß√£o √© praticando! |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="4%"/> <a href="https://github.com/rafaelq80/conta_bancaria_typescript/tree/09_Conta_Controller_Metodos_Bancarios" target="_blank"><b>C√≥digo fonte: Projeto Conta Banc√°ria</b></a></div>

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>