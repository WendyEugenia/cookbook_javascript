<h1>Projeto 01 - Conta Banc√°ria - ContaController - Parte I</h1>



Na etapa anterior, implementamos a Interface **ContaRepository**, onde foram assinados 5 M√©todos do CRUD (Criar Conta, Consultar todas as Contas, Consultar Conta pelo n√∫mero, Atualizar dados da Conta e Apagar Conta) e 3 M√©todos Banc√°rios (Sacar, Depositar e Transferir). 

Nesta etapa, vamos criar a Classe **ContaController**, que implementar√° a Interface **ContaRepository**, que possui a assinatura dos M√©todos necess√°rios para manipular os Objetos das Classes **ContaCorrente** e **ContaPoupanca**, e armazen√°-los em um Array. Al√©m dos M√©todos da Interface **IContaRepository**, tamb√©m ser√£o implementados 3 M√©todos auxiliares (Gerar Numero da Conta, Buscar Conta no Array e Retornar Tipo da Conta).

O Diagrama de Classes do nosso Projeto ficar√° da seguinte forma:

```mermaid
classDiagram
class Conta {
<<Abstract>>
  - numero : number
  - agencia : number
  - tipo : number
  - titular : string
  - saldo : number
  + get numero(): number
  + get agencia(): number
  + get tipo(): number
  + get titular(): string
  + get saldo(): number
  + set numero(numero: number): void
  + set agencia(agencia: number): void
  + set tipo(tipo: number): void
  + set titular(titular: string): void
  + set saldo(saldo: number): void
  + sacar(valor: number): boolean
  + depositar(valor: number): void
  + visualizar(): void
}
class ContaCorrente {
  - limite : number
  + get limite(): number
  + set limite(limite: number): void
  + sacar(number valor): boolean
  + visualizar(): void
}
class ContaPoupanca {
  - aniversario : number
  + get aniversario(): number
  + set aniversario(aniversario: number): void
  + visualizar(): void
}
class IContaRepository{
<< Interface >>
+ procurarPorNumero(numero: number): void
+ listarTodas(): void
+ cadastrar(conta: Conta): void
+ atualizar(conta: Conta): void
+ deletar(numero: number): void
+ sacar(numero: number, valor: number): void
+ depositar(numero: number, valor: number): void
+ transferir(numeroOrigem: number, numeroDestino: number, valor: number): void
}
class ContaController{
+ procurarPorNumero(numero: number): void
+ listarTodas(): void
+ cadastrar(conta: Conta): void
+ atualizar(conta: Conta): void
+ deletar(numero: number): void
+ sacar(numero: number, valor: number): void
+ depositar(numero: number, valor: number): void
+ transferir(numeroOrigem: number, numeroDestino: number, valor: number): void
+ gerarNumero(): number
+ buscarNaCollection(number numero): Conta
+ RetornaTipo(number numero): number
}
Conta <|-- ContaCorrente
Conta <|-- ContaPoupanca
Conta <.. IContaRepository
IContaRepository <|.. ContaController
```

<br />

<h2>üë£ Passo 01 - Criar a Pasta Controller</h2>



Dentro do projeto **conta_bancaria**, vamos criar a pasta **controller**:

1. Na **Guia Explorer**, selecione a pasta **src** e clique no bot√£o **New Folder** (Nova Pasta), indicado na imagem abaixo: 

<div align="center"><img src="https://i.imgur.com/6QkDr3D.png" title="source: imgur.com" /></div>

2. O nome da pasta ser√° **controller**, como mostra a imagem abaixo. Ap√≥s digitar o nome da pasta, pressione a tecla **enter** do seu teclado para concluir. 

<div align="center"><img src="https://i.imgur.com/zM119K0.png" title="source: imgur.com" /></div>

<br />

<h2>üë£ Passo 02 - Criar a Classe ContaController</h2>



Agora vamos criar a **Classe ContaController** no **Namespace Controller**.

1. Selecione a pasta **controller** e clique no bot√£o **New File** (Novo Arquivo), indicado na imagem abaixo:  

<div align="center"><img src="https://i.imgur.com/i4dm08z.png" title="source: imgur.com" /></div>

2. O nome do arquivo ser√° **ContaController.ts**, como mostra a figura abaixo. Ap√≥s digitar o nome do arquivo, pressione a tecla **enter** do seu teclado para concluir. 

<div align="center"><img src="https://i.imgur.com/3Y8b3Dv.png" title="source: imgur.com" /></div>

<br />

Vamos implementar o c√≥digo da Classe **ContaController** aos poucos, M√©todo a M√©todo. Ap√≥s a implementa√ß√£o de cada M√©todo, faremos as altera√ß√µes necess√°rias na Classe **Menu**, para utilizar os M√©todos e faremos os respectivos testes.

Vamos come√ßar implementando a Interface **ContaRepository** na Classe **ContaController**, atrav√©s do c√≥digo abaixo:

 <div align="left"><img src="https://i.imgur.com/A15FBTF.png" title="source: imgur.com" /></div>

**Linha 03:** Observe que depois de implementar a Interface **ContaRepository**, ser√° exibido um erro na Classe ContaController (indicado pela seta verde no c√≥digo). 

A mensagem de erro, informa que a Classe ContaController deve implementar todos os M√©todos da Interface ContaRepository, independente de utiliz√°-los ou n√£o. 

Vamos implementar todos os M√©todos da Interface ContaRepository atrav√©s do **Quick Fix** do VSCode, clicando sobre o nome da Classe. 

> A Ferramenta **Quick Fix ou Corre√ß√µes R√°pidas** tem por objetivo principal corrigir e/ou sugerir corre√ß√µes para erros no c√≥digo que podem fazer com que o build (compilar e gerar o execut√°vel) da aplica√ß√£o falhe.

A anima√ß√£o abaixo mostra como implementar todos os M√©todos da Interface ContaRepository na Classe ContaController:

 <div align="left"><img src="https://i.imgur.com/RZYJwbb.gif" title="source: imgur.com" /></div>

*Ao posicionar o cursor do mouse sobre o erro, o Visual Studio Code exibir√° uma lista sugerindo corre√ß√µes. Clique no link **Quick Fix...** para exibir a lista e na sequ√™ncia, clique na sugest√£o: **Implements Interface - Implementar a Interface**. Observe que todos os 8 M√©todos da Interface ser√£o inseridos na Classe ContaController, com uma implementa√ß√£o b√°sica.*

Na sequ√™ncia, vamos criar o Array que ir√° armazenar os dados de todas as Contas, funcionando como um Banco de dados em Mem√≥ria da nossa aplica√ß√£o.

 <div align="left"><img src="https://i.imgur.com/DuaZ4mF.png" title="source: imgur.com" /></div>

**Linha 06:** Criamos um **Array**, do tipo Conta (Classe Abstrata), chamado **listaContas**. 

**Linha 07:** Criamos uma vari√°vel do tipo **number** chamada **numero**, que armazenar√° o numero da √∫ltima conta que foi criada, funcionando como uma Chave Prim√°ria auto incremental. 

<br />

<h2>Como o Array ir√° armazenar os dados?</h2>

Na imagem abaixo, temos uma representa√ß√£o gr√°fica do Array **listaContas**:

 <div align="left"><img src="https://i.imgur.com/uP92qZ4.png" title="source: imgur.com" /></div>

Observe que o Array **listaContas**, ser√° do tipo **Conta** (Super Classe) e cada novo Objeto das suas respectivas Sub-Classes, que estendem (herdam) a Classe Conta, ser√° adicionado em uma linha do Array. Cada linha do Array √© identificado por um n√∫mero inteiro (√≠ndice).

O Array ir√° respeitar a ordem em que o Objeto foi inserido, ou seja, a cada novo Objeto inserido, uma nova linha ser√° criada ap√≥s o √∫ltimo Objeto adicionado.

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="100px"/> | <div align="left"> **ATEN√á√ÉO:** Embora o Array listaContas seja do tipo Conta (Classe Abstrata), ela consegue armazenar Objetos do tipo ContaCorrente e ContaPoupanca, por se tratarem de Classes que Herdam as caracter√≠sticas da Classe Conta. Esse conceito √© chamado de Polimorfismo de Inser√ß√£o.</div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

<h2>üë£ Passo 03 - Implementar o M√©todo Listar todas as Contas</h2>



Na sequ√™ncia, vamos implementar o M√©todo Listar todas as Contas, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/GmAcYKk.png" title="source: imgur.com" /></div>

**Linha 13:** Observe que na assinatura do M√©todo n√£o foi inserido nenhum par√¢metro, porque o M√©todo exibir√° todos os  Objetos da Classe Conta, armazenados no Array **listaContas**.

**Linha 14:** Atrav√©s do La√ßo de Repeti√ß√£o **for...of**, percorremos todo o **Array listaContas**. 

Observe que a vari√°vel local **conta**, ser√° utilizada para receber um Objeto da Classe Conta a cada itera√ß√£o da Collection, definida pelo La√ßo de repeti√ß√£o, foi criada atrav√©s da palavra reservada **let**.


No c√≥digo do M√©todo **listarTodas()**, como o La√ßo de Repeti√ß√£o est√° percorrendo o Array listaContas, que armazena Objetos da Classe Conta, a palavra reservada **let** entende por infer√™ncia, que a vari√°vel **conta** deve ser criada como um Objeto da Classe Conta.

**Linha 15:** Exibe os dados do Objeto da Classe Conta armazenado na vari√°vel **conta**, atrav√©s do M√©todo **visualizar()**, que foi criado na Classe Model **Conta** e Herdado pelas Classes **ContaCorrente** e **ContaPoupanca**.

<br />

<h2>üë£ Passo 04 - Inserir o M√©todo Listar todas as Contas na Classe Menu</h2>



Agora que implementamos o M√©todo Listar todas as Contas e inserir uma chamada para este M√©todo no Menu:

1. Na Classe Menu, Insira a linha de c√≥digo abaixo (indicado por uma seta verde), no in√≠cio do M√©todo main():

<div align="center"><img src="https://i.imgur.com/o0oY7SE.png" title="source: imgur.com" /></div>

**Linha 10:** Cria um Objeto da Classe **ContaController**, para armazenar os dados das contas no Array listaContas e executar os M√©todos implementados na Classe (M√©todos do CRUD e M√©todos Banc√°rios).

2. Ainda na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/SZOE6pY.png" title="source: imgur.com" /></div>

3. Insira a linha de c√≥digo abaixo (indicado por uma seta verde):

<div align="center"><img src="https://i.imgur.com/CEMBmuc.png" title="source: imgur.com" /></div>

**Linha 69:** Executa o M√©todo **listarTodas()**, da Classe **ContaController**, para listar os dados de todas as contas armazenadas no Array **listaContas**.

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, que deve ser semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/Azkf3TC.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **2** (indicado com uma seta verde na imagem acima) e veja o resultado abaixo:

```bash
Listar todas as Contas



Pressione Enter para Continuar...

```

Observe que n√£o foram exibidos os dados de nenhuma conta, porque as contas que n√≥s criamos para teste n√£o foram inseridas no Array **listaContas**, logo o Array est√° vazio. Para inserirmos dados no Array **listaContas**, precisamos implementar o M√©todo **cadastrar(conta)**.

<br />

<h2>üë£ Passo 05 - Criar o M√©todo Cadastrar Conta</h2>



Na sequ√™ncia, vamos implementar o M√©todo **Cadastrar Conta**, na Classe ContaController, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/NpljzpP.png" title="source: imgur.com" /></div>

**Linha 20:** Observe que na assinatura do M√©todo, foi inserido como par√¢metro um Objeto da Classe Conta, chamado **conta**. Este Objeto ser√° adicionado no Array **listaContas**.

**Linha 21:** Para inserir um novo Objeto da Classe Conta, utilizamos o M√©todo **push()**, do Objeto **Array**, passando como par√¢metro o Objeto da Classe Conta, chamado **conta**.

**Linha 22:** Exibe uma mensagem no console, indicando que o Objeto da Classe Conta, chamado **conta** foi adicionado no Array **listaContas**. Para identificar a conta que foi criada, inserimos o atributo **numero**, da Classe Model Conta, dentro da mensagem para visualizarmos o n√∫mero da conta.

Para gerar automaticamente o n√∫mero da conta, vamos criar o M√©todo auxiliar **gerarNumero()**, no final da Classe ContaController, atrav√©s do c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/zkJEMTb.png" title="source: imgur.com" /></div>

**Linha 49:** Observe que na assinatura do M√©todo n√£o foi inserido nenhum par√¢metro, porque o M√©todo tem como √∫nico Objetivo retornar o n√∫mero da conta todas as vezes que uma nova conta for cadastrada.

**Linha 50:** Como a vari√°vel numero foi inicializada com zero (0), vamos incrementar a vari√°vel atrav√©s do operador de **pr√©-incremento (++)**, incrementando de 1 em 1, a cada nova conta que for criada. Este n√∫mero ser√° retornado como o n√∫mero da nova Conta. Desta forma, automatizaremos o processo de gera√ß√£o do n√∫mero da conta, atrav√©s de uma sequ√™ncia:

- **1¬∫ conta criada** ü°í *numero = 1*
- **2¬∫ conta criada** ü°í *numero = 2*
- ...
- **N conta criada** ü°í *numero = N*

<br />

| <img src="https://i.imgur.com/hOgWvSc.png" title="source: imgur.com" width="80px"/> | <div align="left"> **IMPORTANTE:** Na pr√°tica, este M√©todo simula a Chave Prim√°ria de um Banco de dados, do tipo auto incremental, que ser√° tema de estudo do Bloco 2.</div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

Para gerar o Objeto da Classe Conta, precisamos receber os dados da Conta, via teclado. Para receber os dados via teclado, precisamos criar um "formul√°rio" para cadastrar os dados da Conta atrav√©s dos Comandos de Entrada e Sa√≠da.

<br />

<h2>üë£ Passo 06 - Inserir o M√©todo Cadastrar Conta na Classe Menu</h2>



Agora que implementamos o M√©todo Cadastrar Conta, vamos inserir uma chamada para este M√©todo na Classe Menu:

Para Criar uma nova conta, precisamos criar as entradas de dados, ou seja, criar um formul√°rio de cadastro. Para come√ßar, vamos criar algumas vari√°veis, que ir√£o armazenar temporariamente os dados da nova conta.

1. Crie as novas vari√°veis na Classe Menu, como mostra o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/0ArIBp3.png" title="source: imgur.com" /></div>

Note que na linha 15 foi criado um Array chamado **tiposContas**, que cont√©m os tipos de Contas que o Banco oferece. Esse Array ser√° utilizado no formul√°rio, para escolher o tipo da conta.

<br />

| <img src="https://i.imgur.com/vVDBDG0.png" title="source: imgur.com" width="200px"/> | <div align="left"> **ALERTA DE BSM:** *Mantenha a Aten√ß√£o aos Detalhes ao criar as novas  vari√°veis na Classe Menu. A vari√°vel *opcao*, j√° havia sido criada na constru√ß√£o da Classe Menu.* </div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

2. O trecho acima, cria as seguintes vari√°veis:

| Nome        | Tipo   | Descri√ß√£o                                                    |
| ----------- | ------ | ------------------------------------------------------------ |
| numero      | number | Numero da conta                                              |
| agencia     | number | Numero da ag√™ncia                                            |
| tipo        | number | Tipo da conta:<br />**1**: *Conta Corrente*<br />**2**: *Conta Poupan√ßa* |
| aniversario | number | Dia do anivers√°rio da Conta Poupan√ßa                         |
| titular     | string | Nome do titular da conta                                     |
| saldo       | number | Saldo dispon√≠vel na conta                                    |
| limite      | number | Limite de cr√©dito da conta corrente                          |

<br />

Vari√°veis criadas, vamos criar o formul√°rio de cadastro e criar a chamada para o M√©todo Cadastrar na Classe Menu

1. Na Classe Menu, localize o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/hQw2oGF.png" title="source: imgur.com" /></div>

2. Insira o trecho de c√≥digo abaixo:

<div align="center"><img src="https://i.imgur.com/QP9XxNr.png" title="source: imgur.com" /></div>

**Linhas 67 a 71:** Foram criadas as entradas de dados via teclado para as vari√°veis **agencia** e **titular**.

**Linhas 73 a 74:** Foi utilizado o M√©todo **keyInSelect**, para garantir que a vari√°vel **tipo** receba via teclado somente os n√∫meros **1** - *Conta Corrente* ou **2** - *Conta Poupan√ßa*.

**Linhas 76 a 77:** Foi criada a entrada de dados via teclado para a vari√°vel **saldo**.

**Linhas 79 a 92:** Foi criado um La√ßo condicional do tipo **Switch**, que checar√° qual o tipo da conta. 

- Caso a conta seja do tipo **Conta Corrente (tipo 1)**, solicita a entrada de dados via teclado para a vari√°vel **limite** e executa o M√©todo **cadastrar** da Classe **ContaController**.
- Caso a conta seja do tipo **Conta Poupan√ßa (tipo 2)**, solicita a entrada de dados via teclado para a vari√°vel **aniversario** e executa o M√©todo **cadastrar** da Classe **ContaController**.

**Linha 83:** Observe que dentro do M√©todo **cadastrar** foi criado um Objeto da Classe **ContaCorrente**, composto pelos valores das vari√°veis auxiliares, que receberam dados via teclado. O Atributo **numero**, foi preenchido com o M√©todo auxiliar **gerarNumero()**, criado na Classe **ContaController**.

**Linha 90:** Observe que dentro do M√©todo **cadastrar** foi criado um Objeto da Classe **ContaPoupanca**, composto pelos valores das vari√°veis auxiliares, que receberam dados via teclado. O Atributo **numero**, foi preenchido com o M√©todo auxiliar **gerarNumero()**, criado na Classe **ContaController**.

<br />

Execute o projeto no Terminal do VSCode, atrav√©s do comando abaixo:

```bash
ts-node Menu.ts
```

<br />

1. Ser√° aberto o Menu, semelhante ao da figura abaixo:

<div align="center"><img src="https://i.imgur.com/zZSZtam.png" title="source: imgur.com" /></div>

2. Digite a op√ß√£o **1** e fa√ßa o Cadastro de uma nova Conta Corrente, como mostra o console abaixo:

```bash
Criar Conta


Digite o N√∫mero da ag√™ncia:
123
Digite o Nome do Titular da conta: 
Maria Vieira

Digite o tipo da Conta: 

[1] Conta Corrente
[2] Conta Poupanca

1

Digite o Saldo da conta (R$):
2000
Digite o Limite da Conta (R$): 
200
 
A Conta n√∫mero: 1 foi criada com sucesso!


Pressione enter para continuar...
```

3. Observe que a Conta foi Cadastrada com sucesso. Pressione a tecla enter e crie uma Conta Poupan√ßa:

```bash
Criar Conta


Digite o N√∫mero da ag√™ncia:
123
Digite o Nome do Titular da conta: 
Paulo Souza

Digite o tipo da Conta: 

[1] Conta Corrente
[2] Conta Poupanca

2

Digite o Saldo da conta (R$):
1000
Digite o Dia do anivers√°rio da Conta Poupan√ßa: 
10
 
A Conta n√∫mero: 2 foi criada com sucesso!


Pressione enter para continuar...
```

4. Digite a op√ß√£o 2 (indicado com uma seta verde na imagem abaixo):

<div align="center"><img src="https://i.imgur.com/Azkf3TC.png" title="source: imgur.com" /></div>

5. Veja o resultado abaixo:

```bash
Listar todas as Contas

*****************************************************
Dados da Conta:
*****************************************************
Numero da Conta: 1
Ag√™ncia: 123
Tipo da Conta: Conta Corrente
Titular: Maria Vieira
Saldo: 2000.00
Limite: 200.00


*****************************************************
Dados da Conta:
*****************************************************
Numero da Conta: 2
Ag√™ncia: 123
Tipo da Conta: Conta Poupan√ßa
Titular: Paulo Souza
Saldo: 1000.00
Dia do anivers√°rio: 10


Pressione enter para continuar...
```

Observe que desta vez foram exibidos os dados das 2 contas cadastradas, porque as contas foram inseridas no Array **listaContas**.

<br />

| <img src="https://i.imgur.com/oScAYGc.png" title="source: imgur.com" width="100px"/> | <div align="left"> **ATEN√á√ÉO:** *Observe que a Biblioteca readline-sync, n√£o lida corretamente com caracteres acentuados. N√£o se preocupe com isso agora, porque no final do projeto, depois que aprendermos a trabalhar com Programa√ß√£o Ass√≠ncrona, faremos a corre√ß√£o da acentua√ß√£o da Biblioteca readline-sync.*</div> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

<br />

Como o Array **listaContas** n√£o persiste (grava) os dados de forma definitiva, como um Banco de dados, daria muito trabalho criar novas contas todas as vezes que precisarmos testar a aplica√ß√£o. Para simplificar, vamos substituir os dados de teste atuais (criados logo depois das vari√°veis auxiliares), que n√£o est√£o utilizando o Array **listaContas**, pelo trecho de c√≥digo abaixo:

```c#
console.log("\nCriar Contas\n");

let cc1: ContaCorrente = new ContaCorrente(contas.gerarNumero(), 123, 1, "Jo√£o da Silva", 1000, 100.0);
contas.cadastrar(cc1);

let cc2: ContaCorrente = new ContaCorrente(contas.gerarNumero(), 124, 1, "Maria da Silva", 2000, 100.0);
contas.cadastrar(cc2);

let cp1: ContaPoupanca = new ContaPoupanca(contas.gerarNumero(), 125, 2, "Mariana dos Santos", 4000, 12);
contas.cadastrar(cp1);

let cp2: ContaPoupanca = new ContaPoupanca(contas.gerarNumero(), 125, 2, "Juliana Ramos", 8000, 15);
contas.cadastrar(cp2);

contas.listarTodas();
```

O trecho de c√≥digo acima, cria 2 Objetos da Classe ContaCorrente e 2 Objetos da Classe ContaPoupanca, dentro da Collection **listaContas**, todas as vezes que o projeto for executado.

<br />

| <img src="https://i.imgur.com/L338M2G.png" title="source: imgur.com" width="138px"/> | **DESAFIO:** Ap√≥s inserir o trecho de c√≥digo acima, experimente o M√©todo Listar todas as contas e verifique se os dados das 4 contas foram listadas. A melhor forma de aprender uma Linguagem de Programa√ß√£o √© praticando! |
| ------------------------------------------------------------ | :----------------------------------------------------------- |

<br />

A implementa√ß√£o dos M√©todos do CRUD, continua na parte II...

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>